# Инструкция по работе с git

## Что это и для чего нужна система контроля версий?

### Что такое система контроля версий?

**Контроль версий (контроль исходного кода)** — практика, которая позволяет отслеживать  изменения исходного кода и управлять ими. Мы создали сайт, он работает, пользователи не испытывают проблем. Но прошло время и мы  решили изменить функциональность. Прежде чем вносить изменения, сохраняем рабочую версию  сайта на компьютере или сервере. Это будет архив «Рабочая версия нашего сайта». Спустя время  появляется еще одна версия нашего сайта, допустим, 2.0. При возникновении проблем всегда  можно откатиться до первой версии и запустить сайт заново.

### Для чего нужна система контроля версий

Контроль версий необходим, чтобы

* хранить разные версии проекта;
* возвращаться к разным версиям проекта.

_**Примеры:**_ версии сайтов (по датам) и документов.

Хранение версий сводится к созданию копий информации на компьютере или сервере.

Функцию возврата реализуют за счёт восстановления предыдущих версий.

Таким образом, **система контроля** — это реализованная возможность замены информации с использованием сохраненных версий.

## Установка git и VSCode на ваш ПК.

### Установка VSCode на ваш ПК.

Установка VS Code на macOS:

1. Скачать программу для установки.
2. Открыть архив VSCode-osx.zip.
3. Перетащить Visual Studio Code.app в папку Applications.
4. Добавить Visual Studio Code в Dock, выбрав в Options «Keep in Dock».

### Установка git на ваш ПК

**Homebrew** — полезная программа, устанавливающая пакеты в macOS, которые не предоставляет Apple. Для установки Homebrew запустите «Терминал» и введите команду ниже.

> `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`

Введите пароль для подтверждения установки, а затем команду 
`brew install git` для установки **Git**. Остается проверить корректность установки с помощью знакомой комбинации `git --version`.

#### Первая настройка git

После установки необходимо «представиться» системе контроля версий. Это нужно сделать всего один раз, и git запомнит вас. Для этого нужно ввести в терминале 2 команды:
* `git config --global user.name «Ваше имя английскими буквами»`
* `git config --global user.email ваша почта@example.com`

## Создание и базовая работа с локальным репозиторием.

### Что такое репозиторий и инструкция по созданию локальных репозиториев.

Репозиторий — это папка, в которой настроена система контроля версий. Если пользуетесь системой контроля версий Git, вам достаточно вызвать в терминале свою программу `git`, поставить
пробел и передать параметр и команду `init`. Вы говорите Git: «Инициализируй». Это надо выполнить в той папке, из которой хотите сделать репозиторий.

### Базовая работа с локальным репозиторием

Далее идет команда `git add`. Вспоминаем, как пользоваться командой `add` и добавить файл к отслеживанию в этой программе. Снова вводим команду `git` и команду `add`, после чего указываем файл, который надо добавить. Обязательно добавляем расширение. Для Git нет никакой разницы, с какими файлами он работает. Вы можете сохранять абсолютно любые файлы, используя команду `git add`, то есть добавлять их к отслеживанию.

Далее мы рассматривали команду `git commit`. Эта команда сохраняет текущее состояние — некий сейв в игре. Мы фиксируем текущее состояние наших файлов и оставляем некоторое
текстовое напоминание, что конкретно здесь сделали. Пишем `git commit`, добавляем `-m`, сохраняя некоторый месседж, комментарий, и указываем тот текст, который напомнит, что в этом файле происходит.

В конце мы рассмотрели команду `git diff` как difference — отличие, разница. Она позволяет посмотреть, чем отличается наш текущий файл от того, что уже сохранено. Мы видим, что минусом показываются удалённые строки, а плюсом — добавленные.

Ещё у нас была команда `git log`. Она позволяет посмотреть журнал всех изменений.

## Ветки. Локальная работа с ветками в git.

### Что такое ветки и для чего они нужны при работе с системой контроля версий.

Под веткой принято понимать независимую последовательность коммитов в хронологическом порядке. Однако конкретно в Git реализация ветки выполнена как указатель на последний коммит в рассматриваемой ветке. После создания ветки уже новый указатель ссылается на текущий коммит.

Имя основной ветки Git-проекта по умолчанию — *master* (однако зачастую бывает *main*, например, в GitHub), она появляется сразу при инициализации репозитория. Эта ветка ничем не отличается от остальных и также ее можно переименовать, но по договоренности *master* принято считать главной веткой в проекте.

### Базовая работа с ветками в git.

Команда `git branch` — главный инструмент для работы с ветвлением. С ее помощью можно добавлять новые ветки, перечислять и переименовывать существующие и удалять их.

Чтобы в Git добавить ветку мы используем:

> `git branch <name of new branch>`

После данной операции ветка уже была создана, но вы по-прежнему находитесь в прежней ветке. Если вы планируете переместиться на другую ветку, в том числе только что созданную, необходимо написать `checkout`:

> `$ git checkout <name of branch>`

Для того чтобы определить, где сейчас находится разработчик, Git использует специальный указатель **HEAD**, ссылающийся на текущую локальную ветку. В результате `checkout` **HEAD** переместится на иную ветку.

## Работа с удаленными репозиториями.

### Что такое удаленный репозиторий и для чего он нужен

Посмотрим, как поделиться результатами своей работы с кем-то.
Например, у нас есть репозиторий одного человека и репозиторий другого человека. И мы хотим всё передать третьему. Для этого можно воспользоваться флешкой, заархивировать
свою папку, передать её по почте или переложить в облачное хранилище. Можно переслать папку физически, что зачастую не очень удобно, но технически возможно. Например, можете
направить свою версию одногруппнику, он в ней что-то поменяет и переделанный вариант целиком отправит обратно. Да, это не подход к контролю версий, но в целом так уже работать
можно

Но если захотим работать так же, как те, кто придумывал системы контроля версий, потребуется воспользоваться удалёнными репозиториями. И здесь мы впервые встретимся с
сервисом **GitHub**. Надо понимать и чётко осознавать, что **Git** и **GitHub** — *разные вещи*.

1. **Git** — это программа, которая устанавливается на компьютер, где локально выполняет
указанные вами команды.
2. **GitHub** — это сервис компании Microsoft, который позволяет интегрироваться с программой Git и настроить удалённую работу с вашим репозиторием.

Таким образом, вы можете работать локально или хранить свой репозиторий на **GitHub**, используя команды, входящие в программу **Git**.

### Базовая работа с удаленными репозиториями GitHub

#### git clone

Копировать внешний репозиторий на свой ПК можно командой `git clone`. Команда `git clone` составная: она не только
загружает все изменения, но и пытается слить  все ветки на локальном компьютере и в удаленном репозитории.

#### git pull
Эта команда позволяет скачать все из текущего репозитория и автоматически сделать merge с нашей версией

#### git push
Отправить свою версию репозитория во внешний репозиторий поможет команда `git push`. При первом её использовании нужна
авторизация.

* Эта команда позволяет отправить нашу версию репозитория на внешний репозиторий. **ТРЕБУЕТ АВТОРИЗАЦИИ** на внешнем репозитории.

## Совместная работа над проектом (fork, pull request)

### Как строится и для чего нужна совместная работа в системах контроля версий

1. Создать аккаунт на [GitHub.com](https://www.github.com)
2. Создать локальный репозиторий
3. “Подружить” ваш локальный и удалённый репозитории. *GitHub при создании нового репозитория подскажет, как это можно сделать*
4. Отправить (`push`) ваш локальный репозиторий в удалённый (на GitHub), при этом, возможно, вам нужно будет авторизоваться на удалённом репозитории
5. Провести изменения “с другого компьютера”
6. Выкачать (`pull`) актуальное состояние из удалённого репозитория

### Инструкция по созданию pull request

**pull request:**
*  команда для предложения изменений
* запрос на вливание изменений в репозиторий

В больших компаниях один ответственный за проект создает аккаунт. Другие пользователи дают команду `pull request`. Предлагать изменения на GitHub нужно в отдельной ветке. Сначала
пользователь копирует репозиторий на свой компьютер, делает *fork* репозитория, затем клонирует версию на своём ПК, создаёт ветку с предлагаемыми изменениями, отправляет изменения командой push в свой аккаунт на GitHub и дает команду `pull request`.

#### Как сделать pull request

* Делаем *fork* (ответвление) репозитория
* Делаем `git clone` **своей** версии репозитория
* Создаем новую ветку и **в нее** вносим свои изменения
* Фиксируем изменения (делаем коммиты)
* Отправляем свою версию в свой GitHub
* На сайте GitHub нажимаем кнопку **pull request**

## Книги и полезные ссылки по изучению git.

[С. Чакон, Б. Штауб. Git для профессионального программиста](https://gbcdn.mrgcdn.ru/uploads/asset/4245110/attachment/d4eb8c232f8f2bdf4e42ba7cb49e0c50.pdf)

[Статья](https://gb.ru/blog/sovety-dlya-teh-kto-osvaivaet-git/) про папки, репозитории и некоторые сложности при освоении контроля версий от Ильнара Шафигуллина.

## Альтернативные системы контроля версий.

### Система одновременных версий (CVS)

CVS появилась в 1980-х и до сих пор популярна как у разработчиков коммерческих продуктов, так и у open-source разработчиков.

**Преимущества:**

* Испытанная временем технология, которая удерживается на рынке десятки лет.

**Недостатки:**

* Переименование или перемещение файлов не отражается в истории
* Риски безопасности, связанные с символическими ссылками на файлы
* Нет поддержки атомарных операций, что может привести к повреждению кода
* Операции с ветками программного кода дорогостоящие, так как эта система контроля не предназначена для долгосрочных проектов с ветками кода

### Apache Subversion (SVN)

SVN создавалась как альтернатива CVS с целью исправить недостатки CVS и в то же время обеспечить высокую совместимость с ней.

**Преимущества:**

* Система на основе CVS
* Допускает атомарные операции
* Операции с ветвлением кода менее затратны
* Широкий выбор плагинов IDE
* Не использует пиринговую модель

**Недостатки:**

* Все еще сохраняются ошибки, связанные с переименованием файлов и директорий
* Неудовлетворительный набор команд для работы с репозиторием
* Сравнительно небольшая скорость

### Mercurial

Mercurial была выпущена одновременно с Git. Это  также распределенная система контроля версий.

**Преимущества:**

* По сравнению с Git легче в освоении
* Подробная документация
* Распределенная модель системы контроля версий

**Недостатки:**

* Нет возможности слияния двух родительских веток
* Использование плагинов, а не скриптов
* Меньше возможностей для нестандартных решений