# Инструкция по работе с git

## Что это и для чего нужна система контроля версий

### Что такое система контроля версий?

Контроль версий, также известный как управление исходным кодом, — это практика отслеживания изменений программного кода и управления ими. Системы контроля версий — это программные инструменты, помогающие командам разработчиков управлять изменениями в исходном коде с течением времени. 

**Git** - это одна из реализаций распределённых систем контроля версий, имеющая как и локальные, так и удалённые репозитории. Является самой популярной реализацией контроля версий в мире.
*****
Изначально Git был создан **Линусом Торвальдсом** при разработке ядра Linux. Однако инструмент так понравился разработчикам, что в последствии, он получил широкое распространение и его стали использовать в других проектах. 

### Для чего нужна система контроля версий

Во-первых, чтобы отследить изменения, произошедшие с проектом, со временем. Проще говоря, мы можем посмотреть как менялись файлы программы, на всех этапах разработки и при необходимости вернуться назад и что-то отредактировать. Часто бывают ситуации, когда, во вполне себе работающий код, вам нужно внести определенные правки или улучшить какой-то функционал, по желанию заказчика. Однако после внедрения нововведений, вы с ужасом понимаете, что все сломалось. У вас начинается судорожно дергаться глаз, а в воздухе повисает немой вопрос: “Что делать?” Без системы контроля версий, вам надо было бы долго напряженно просматривать код, чтобы понять как было до того, как все перестало работать. С Гитом же, все что нужно сделать - это откатиться на коммит назад. Во-вторых он чрезвычайно полезен при одновременной работе нескольких специалистов, над одним проектом. Без Гита случится коллапс, когда разработчики, скопировав весь код из главной папки и сделав с ним задуманное, попытаются одновременно вернуть весь код обратно.

## Установка git и VSCode на ваш ПК.

### Установка VSCode на ваш ПК.

1. Установка в Windows
2. Скачать установщик.
3. Открыть загрузки и найти скачанный файл.
4. Запустить двойным кликом VSCodeUserSetup-{version}.exe.
5. По умолчанию приложение появится в папке Programs\Microsoft\VS Code.

### Установка git на ваш ПК

Прежде чем использовать Git, вы должны установить его на своём компьютере. Даже если он уже установлен, наверное, это хороший повод, чтобы обновиться до последней версии. Вы можете установить Git из собранного пакета или другого установщика, либо скачать исходный код и скомпилировать его самостоятельно.

#### Первая настройка git

Первое, что вам следует сделать после установки Git — указать ваше имя и адрес электронной почты. Это важно, потому что каждый коммит в Git содержит эту информацию, и она включена в коммиты, передаваемые вами, и не может быть далее изменена:

 *git config --global user.name "My Name"*

*git config --global user.email myEmail@example.com*

## Создание и базовая работа с локальным репозиторием.

### Что такое репозиторий и инструкция по созданию локальных репозиториев.

Репозиторий Git — это виртуальное хранилище проекта. В нем можно хранить версии кода для доступа по мере необходимости.

Git хранит свои файлы и историю прямо в папке проекта. Чтобы создать новый репозиторий, нам нужно открыть терминал, зайти в папку нашего проекта и выполнить команду *git init*. Это включит приложение в этой конкретной папке и создаст скрытую директорию .git, где будет храниться история репозитория и настройки.

### Базовая работа с локальным репозиторием

В git есть концепция области подготовленных файлов. Можно представить ее как холст, на который наносят изменения, которые нужны в коммите. Сперва он пустой, но затем мы добавляем на него файлы (или части файлов, или даже одиночные строчки) командой *add* и, наконец, коммитим все нужное в репозиторий (создаем слепок нужного нам состояния) командой *commit*.

*status* — это еще одна важнейшая команда, которая показывает информацию о текущем состоянии репозитория: актуальна ли информация на нём, нет ли чего-то нового, что поменялось, и так далее. 

Как сделать коммит? Представим, что нам нужно добавить пару новых блоков в html-разметку (index.html) и стилизовать их в файле style.css. Для сохранения изменений, их необходимо закоммитить. Но сначала, мы должны обозначить эти файлы для Гита, при помощи команды *git add*, добавляющей (или подготавливающей) их к коммиту. Добавлять их можно по отдельности или вместе - всё сразу. Теперь создадим непосредственно сам коммит с помощью команды *git commit -m* где флажок *-m* задаст *commit message* - комментарий разработчика. Он необходим для описания закоммиченных изменений. И здесь работает золотое правило всех комментариев в коде: «Максимально ясно, просто и содержательно обозначь написанное!»

Для просмотра все выполненных фиксаций можно воспользоваться историей коммитов. Она содержит сведения о каждом проведенном коммите проекта. Запросить ее можно при помощи команды *git log* или *git log --oneline* для сжатой информации о коммитах. В ней содержится вся информация о каждом отдельном коммите, с указанием его хэша, автора, списка изменений и даты, когда они были сделаны. Отследить интересующие вас операции в списке изменений, можно по хэшу коммита, при помощи команды *git show*.

Ну а если вдруг нам нужно переделать commit message и внести туда новый комментарий, можно написать следующую конструкцию: *git commit --amend -m 'Новый комментарий'*. В данном случае сообщение последнего коммита перезапишется. Но злоупотреблять этим не стоит, поскольку эта операция опасная и лучше ее делать до отправки коммита на сервер.

## Ветки. Локальная работа с ветками в git.

### Что такое ветки и для чего они нужны при работе с системой контроля версий.

Во время разработки новой функциональности считается хорошей практикой работать с копией оригинального проекта, которую называют веткой. Ветви имеют свою собственную историю и изолированные друг от друга изменения до тех пор, пока вы не решаете слить изменения вместе. Использование веток не только изолирует разработку функций, но и позволяет обсуждать изменения с помощью запросов *pull*.

### Базовая работа с ветками в git.

Основная ветка в каждом репозитории называется *master*. Чтобы создать еще одну ветку, используем команду *branch <name>*. Это создаст новую ветку, пока что точную копию ветки master.

Сейчас, если мы запустим *branch*, мы увидим две доступные опции: ветку *master* и новую созданную нами ветку. *master* — это активная ветка, она помечена звездочкой. Но мы хотим работать с нашей “новой потрясающей фичей”, так что нам понадобится переключиться на другую ветку. Для этого воспользуемся командой *checkout*, она принимает один параметр — имя ветки, на которую необходимо переключиться. В Git ветка — это отдельная линия разработки. *Git checkout* позволяет нам переключаться как между удаленными, так и между локальными ветками. Это один из способов получить доступ к работе коллеги или соавтора, обеспечивающий более высокую продуктивность совместной работы. Однако тут надо помнить, что пока вы не закомитили изменения, вы не сможете переключиться на другую ветку.

Наша “потрясающая новая фича” будет еще одним файлом под названием **Newbranch1**. Мы создадим его, добавим и закоммитим. Изменения завершены, теперь мы можем переключиться обратно на ветку *master*. Теперь, если мы откроем наш проект в файловом менеджере, мы не увидим файла **Newbranch1**, потому что мы переключились обратно на ветку *master*, в которой такого файла не существует. Чтобы он появился, нужно воспользоваться командой *merge* для объединения веток. Теперь ветка master актуальна. Ветка **Newbranch1** больше не нужна, и ее можно удалить с помощью команды *git branch -d*

## Работа с удаленными репозиториями.

### Что такое удаленный репозиторий и для чего он нужен

Репозиторий, хранящийся в облаке, на стороннем сервисе, специально созданном для работы с git имеет ряд преимуществ. Во-первых - это своего рода резервная копия вашего проекта, предоставляющая возможность безболезненной работы в команде. А еще в таком репозитории можно пользоваться дополнительными возможностями хостинга. К примеру -визуализацией истории или возможностью разрабатывать вашу программу непосредственно в веб-интерфейсе.

### Базовая работа с удаленными репозиториями GitHub

Клонирование - это когда вы копируете удаленный репозиторий к себе на локальный ПК. Это то, с чего обычно начинается любой проект. При этом вы переносите себе все файлы и папки проекта, а также всю его историю с момента его создания. Чтобы склонировать проект, сперва, необходимо узнать где он расположен и скопировать ссылку на него.

При клонировании в текущий каталог, там будет создана папка, в которую поместятся все проектные файлы и скрытая директория .git, с самим репозиторием, или с необходимой информацией о нем. В такой ситуации, для клонируемого репозитория, по умолчанию, будет создана папка с одноименным названием, но его можно залить и в другую директорию, например: *git clone https://github.com/tutorialzine/awesome-project new-folder*

Чтобы загрузить что-нибудь в удаленный репозиторий, сначала нужно к нему подключиться. Регистрация и установка может занять время, но все подобные сервисы предоставляют хорошую документацию.
Чтобы связать наш локальный репозиторий с репозиторием на GitHub, выполним следующую команду в терминале (обратите внимание, что нужно обязательно изменить URI репозитория на свой): *git remote add origin https://github.com/tutorialzine/awesome-project.git*

Сейчас самое время переслать наш локальный коммит на сервер. Этот процесс происходит каждый раз, когда мы хотим обновить данные в удаленном репозитории.
Команда, предназначенная для этого - *push*. Она принимает два параметра: имя удаленного репозитория (мы назвали наш origin) и ветку, в которую необходимо внести изменения (master — это ветка по умолчанию для всех репозиториев). Эта команда немного похожа на *git fetch*, с той лишь разницей, что при помощи *fetch* мы импортируем коммиты в локальную ветку, а применив *push*, мы экспортируем их из локальной в удаленную. Если вам необходимо настроить удаленную ветку используйте *git remote*. Однако пушить надо осторожно, ведь рассматриваемая команда перезаписывает безвозвратно все изменения. В большинстве случаев, ее используют, чтобы опубликовать выгружаемые локальные изменения в центральный репозиторий. А еще ее применяют для того, чтобы поделиться, внесенными в локальный репозиторий, нововведениями, с коллегами или другими удаленными участниками разработки проекта. Подытожив сказанное, можно назвать *git push* - командой выгрузки, а *git pull* и *git fetch* - командами загрузки или скачивания. После того как вы успешно запушили измененные данные, их необходимо внедрить или интегрировать, при помощи команды слияния *git merge*.

## Совместная работа над проектом (fork, pull request)

### Как строится и для чего нужна совместная работа в системах контроля версий

Cистема построена таким образом, что не хранит каждую версию отдельными архивами, а вся информация хранится в виде т.н. слепков состояний проекта (хэшей). Все разработчики могут работать с кодом проекта параллельно, не опасаясь, что их работа будет утеряна, ведь если что-то попало в СКВ, то это остаётся в истории проекта навсегда.

### Инструкция по созданию pull request

1. Делаем fork некого репозитория (предположительно коллеги).
2. Делаем clone своей версии репозитория.
3. Создаём в локальном репозитории новую ветку и вносим в неё изменения.
4. Фиксируем изменения (делаем коммиты).
5. Отправляем свою изменённую версию с локального на удалённый репозиторий (GitHub/GitLab etc).
6. На сайте сервиса (GitHub) нажимаем кнопку *pull request*.

## Книги и полезные ссылки по изучению git.

[Гит за полчаса](https://proglib.io/p/git-for-half-an-hour "Всплывающая подсказочка")

[Краткая инфо](https://www.atlassian.com/ru/git/tutorials/what-is-version-control "По быстрому посмотреть если забыл")

## Альтернативные системы контроля версий.

* CVS
* SVN
* Mercurial



